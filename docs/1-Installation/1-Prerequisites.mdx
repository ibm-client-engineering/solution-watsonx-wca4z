---
id: Pre-Requisites
sidebar_position: 1
title: Pre-Requisites
custom_edit_url: null
---

:::note
This guide assumes you have an IBM Cloud account that is accessible. It also assumes you have the `ibmcloud` cli installed and configured. The installation of `ibmcloud` cli can be found [here](https://cloud.ibm.com/docs/cli?topic=cli-install-ibmcloud-cli). 

Mileage may vary on different cloud providers.
:::

## Pre-Requisites

- Watsonx Code Assistant instance deployed in IBM Cloud
- IBMÂ® Application Discovery and Delivery Intelligence (ADDI)
- IBM Application Discovery Connect for Mainframe (IBM AD Connect for Mainframe)

## Hardware

For this build, we will be deploying Virtual Server Instances into IBM Cloud. They require the following:

ADDI Host
- OS: Windows 10 or 11 
- RAM: 32 Gigs
- Storage: 100G for local, 300G for AD components
- Cores: 8

Refactor Host
- OS: Red Hat Enterprise Linux 8x/9x
- RAM: 16G
- Storage: 100G for local, 400G for data
- Cores: 4

## Software to be installed

ADDI Host
- ADDI
- Microsoft SQL Server (standard, express, or developer editions)
- VSCode

Refactoring Assistant
- Podman
- Refactor Containers

## ADDI Host

### Creating the instance in IBM Cloud

Install the ibmcloud plugin for infrastructure service

_note to RK: Add the cli commands to create the instance here_

### Accessing the instance in IBM Cloud

```tsx
ibmcloud plugin install infrastructure-service
```
:::info
Useful links for topics covered here.
https://cloud.ibm.com/docs/vpc?topic=vpc-vsi_is_connecting_windows#vsi_connecting_windows_instance
:::
Our instance name for windows is called "wca4z-addi"

Query the status of your instance by running the following command. `INSTANCE` is the ID or Name for the instance that you want to connect:

```tsx
ibmcloud is instance wca4z-addi
```

When the instance shows that it's `running`, you are ready to retrieve the initialization values to get your password.

Run the following command to initialize your instance and obtain your instance password. Specify your instance ID or Name for the `INSTANCE` variable and your private key for the `KEY` or `KEY_FILE` variable:

```tsx
ibmcloud is instance-initialization-values wca4z-addi [--private-key (KEY | @KEY_FILE)]
```

The key we created is called `win-key-wca4z_rsa.prv`

So our command should be 

```tsx
ibmcloud is instance-initialization-values wca4z-addi --private-key @~/.ssh/win-key-wca4z_rsa.prv
```

This command decodes and decrypts your password, which is automatically generated when you create an instance by using a Windows image. The password is decoded and decrypted based on the public SSH Key that you used at instance create time and the associated private SSH key that you specify in the `instance-initialization-values` command. For more information, see the [CLI command reference](https://cloud.ibm.com/docs/vpc?topic=vpc-vpc-reference#instance-initialization-values).
    
You can also use the API to get the encrypted password, which returns the decoded and decrypted password. For more information, see [Retrieve configuration that is used to initialize the instance API](https://cloud.ibm.com/apidocs/vpc/latest#retrieve-configuration-used-to-initialize-the-inst).

The output of the above command should return something like this:
```tsx
Getting instance initialization values for wca4z-addi under account Fred Whipple's Account as user kramerro@us.ibm.com...

Keys                 ID                                          Name            Fingerprint
                     r014-48416b92-2235-48ff-aea7-034e5a38e8a5   win-key-wca4z   SHA256:rUix46/y3Qol46dnznusfaq4dRV/RlMrGsjEvLNWoDw

Encrypted password   I/AbavM1cYL1g0omTPzNlpIIIR3zwQKYmEmAe2DFb72Bs+HmqUy+h0C8c3bD/fV1LyUGoCWqJqnngz7+SlVddzFLunVtvM1X30qUgBCzuJfvJo6IpyNFc5YFoWZxMojWKp1e71ezzILTD10Z6MPNtdCwL2syYag+vNPexgHwc4eJwlqnhUTdFD3i0FPYOzSiReKxw1m4QpwXTd/EyecvDbrSAXnIjYyyMlJsv/dmZrLhynEjUBwn39RTqD2Da9Mjyi7hyrzKZqkKP3barnwPRFd8xQI21gA0Lm3mgC7PJzmA5Z8KqGQV3IPlFE909HRQeHpB5DN8nS4KsNGKPRVl/pF3XAA9BRoMKoOMV1d4mOXGU2b5QU1+IKpZU7ObCKhqLw+U3Dm1sPYW5IgujZd725uhqwwIBZukMQE2RSYRij0ef5mhv9gt/f/zrNWTaZVjgQqA3ufL4dIdu/W8mZf2puxKCYvhIwolA13Y09BeTLRBCK9/8LOx0e8WjmDg9lx49Fv5AwgaUi2tpLWjBf4Xgt8b6ddIo0Lgy8sc4KdsdQ/8Jtugblp/zfEzxJl6WqpD6+3UOSLQi9dKtproL9tI3CDkk2WLhV02m+vG6imrVMZpCGsgdlLEWqwCXKNIvaGmCKG0TTm7QT8BqiqxTwUPvQCLcIEGf4yWVsEbYGvR+zQ=
Encryption key CRN   SHA256:rUix46/y3Qol46dnznusfaq4dRV/RlMrGsjEvLNWoDw
Password             <UNENCRYPTED PASSWORD>
```

Once you have obtained the password from the above command, make sure you have associated a floating public IP for the ADDI host so it is accessible:

```tsx
ibmcloud is floating-ip-reserve <FLOATING_IP_NAME> --nic <NIC>
```

You now have what you need to connect to your Windows instance: a decrypted password and a floating IP address. Use your preferred Remote Desktop client to connect to your instance. To connect to your instance, provide the floating IP address and the decrypted password. The username is `Administrator` by default. If you're connecting from a client that is running the Windows Administrator account, use `.\administrator` as the user ID to log on to RDP.

### Configure the data disk

Open the server manager on the ADDI host and select the 300 gig disk:

![server_manager](https://github.com/ibm-client-engineering/solution-watsonx-ca4z/assets/102995992/9341ebae-dfac-40d2-ac5c-c79a317b9339)

Start up the New Volume Wizard

![volume_wizard1](https://github.com/ibm-client-engineering/solution-watsonx-ca4z/assets/102995992/86305a77-8975-46f9-9b69-8c1d25bc7185)

![volume_wizard2](https://github.com/ibm-client-engineering/solution-watsonx-ca4z/assets/102995992/5df74072-7ae5-4248-a5f5-a79371e51093)

![volume_wizard3](https://github.com/ibm-client-engineering/solution-watsonx-ca4z/assets/102995992/0de541f6-b795-475d-93ce-7a94ccedb6fc)

Make it Drive D. This will be our storage for the ADDI Data.

![volume_wizard4](https://github.com/ibm-client-engineering/solution-watsonx-ca4z/assets/102995992/b32f31ca-b7c8-4a4b-a65b-550835abdc32)

We'll call our volume label `AD Data`

![volume_wizard5](https://github.com/ibm-client-engineering/solution-watsonx-ca4z/assets/102995992/ed2f78aa-38cf-4acc-9f10-2156954dbad6)

Confirm and Create

### Installing Microsoft SQL Server

As of this writing, the following versions of MS SQL Server are compatible with ADDI:

- Microsoft SQL Server 2014/2016/2017/2019/2022 (Express/Standard/Developer)

For our examples, we will be using the Express edition of 2019.

On your ADDI host, open the Edge browser and download the [installer](https://download.microsoft.com/download/7/f/8/7f8a9c43-8c8a-4f7c-9f92-83c18d96b681/SQL2019-SSEI-Expr.exe)

Locate the SQL Server installer we downloaded

![sql_install1](https://github.com/ibm-client-engineering/solution-watsonx-ca4z/assets/102995992/750b7cf7-bf7b-4c15-b47f-6303517a0e4b)


