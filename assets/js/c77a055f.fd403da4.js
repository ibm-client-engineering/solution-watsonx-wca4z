"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[285],{1596:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var i=t(5893),s=t(1151);const l={id:"Refactor-Install",sidebar_position:3,title:"Refactor Install (10 mins)",custom_edit_url:null},a=void 0,o={id:"Automation/Refactor-Install",title:"Refactor Install (10 mins)",description:"Overview",source:"@site/docs/5-Automation/3-Refactor.mdx",sourceDirName:"5-Automation",slug:"/Automation/Refactor-Install",permalink:"/solution-watsonx-wca4z/Automation/Refactor-Install",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"Refactor-Install",sidebar_position:3,title:"Refactor Install (10 mins)",custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"ADDI Install (1hr)",permalink:"/solution-watsonx-wca4z/Automation/ADDI-Install"},next:{title:"wca4Z",permalink:"/solution-watsonx-wca4z/"}},r={},c=[{value:"Overview",id:"overview",level:2},{value:"Download the Refactor Binary",id:"download-the-refactor-binary",level:2},{value:"Script Walkthrough",id:"script-walkthrough",level:2},{value:"Install Refactor Assistant (5 mins)",id:"install-refactor-assistant-5-mins",level:3},{value:"Configure Certifcates (1 min)",id:"configure-certifcates-1-min",level:3},{value:"Install Gitlab (5 min)",id:"install-gitlab-5-min",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)("div",{style:{borderBottom:"1px solid #000",marginTop:"20px",marginBottom:"20px"}}),"\n",(0,i.jsx)(e.p,{children:"This section will walkthrough the automation scripts for the Refactor install. This install will consist of:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Podman"}),"\n",(0,i.jsx)(e.li,{children:"Refactor Containers"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"download-the-refactor-binary",children:"Download the Refactor Binary"}),"\n",(0,i.jsxs)(e.p,{children:["On your linux box\nGo to IBM's internal download ",(0,i.jsx)(e.a,{href:"https://w3south-limited-use.cpc.ibm.com/software/xl/download/ticket.wss",children:"site"})," and download ",(0,i.jsx)(e.code,{children:"IBM watsonx Code Assistant for Z Refactoring Assistant 1.1.1 Linux Multilingual"}),"\nRight click on your browser and inspect -> network. Then click download and copy the ",(0,i.jsx)(e.code,{children:"Requested URL"})," from the network tab."]}),"\n",(0,i.jsx)(e.p,{children:"On your linux machine run the following to install wget"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[root@adp-linux home]# yum install wget\nUpdating Subscription Management repositories.\nRed Hat Enterprise Linux 8 for x86_64 - BaseOS (RPMs)                                                                                                                                                                                                                                                                                       817  B/s | 4.1 kB     00:05\nRed Hat Enterprise Linux 8 for x86_64 - Supplementary (RPMs)                                                                                                                                                                                                                                                                                115 kB/s | 3.8 kB     00:00\nRed Hat Enterprise Linux 8 for x86_64 - AppStream (RPMs)                                                                                                                                                                                                                                                                                    159 kB/s | 4.5 kB     00:00\nDependencies resolved.\n============================================================================================================================================================================================================================================================================================================================================================================\n Package                                                                            Architecture                                                                  Version                                                                                 Repository                                                                                                   Size\n============================================================================================================================================================================================================================================================================================================================================================================\nInstalling:\n wget                                                                               x86_64                                                                        1.19.5-11.el8                                                                           rhel-8-for-x86_64-appstream-eus-rpms                                                                        734 k\nInstalling dependencies:\n libmetalink                                                                        x86_64                                                                        0.1.3-7.el8                                                                             rhel-8-for-x86_64-baseos-rpms                                                                                32 k\n\nTransaction Summary\n============================================================================================================================================================================================================================================================================================================================================================================\nInstall  2 Packages\n\nTotal download size: 766 k\nInstalled size: 2.8 M\nIs this ok [y/N]: y\nDownloading Packages:\n(1/2): libmetalink-0.1.3-7.el8.x86_64.rpm                                                                                                                                                                                                                                                                                                   6.3 kB/s |  32 kB     00:05\n(2/2): wget-1.19.5-11.el8.x86_64.rpm                                                                                                                                                                                                                                                                                                        142 kB/s | 734 kB     00:05\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nTotal                                                                                                                                                                                                                                                                                                                                       149 kB/s | 766 kB     00:05\nRunning transaction check\nTransaction check succeeded.\nRunning transaction test\nTransaction test succeeded.\nRunning transaction\n  Preparing        :                                                                                                                                                                                                                                                                                                                                                    1/1\n  Installing       : libmetalink-0.1.3-7.el8.x86_64                                                                                                                                                                                                                                                                                                                     1/2\n  Installing       : wget-1.19.5-11.el8.x86_64                                                                                                                                                                                                                                                                                                                          2/2\n  Running scriptlet: wget-1.19.5-11.el8.x86_64                                                                                                                                                                                                                                                                                                                          2/2\n  Verifying        : wget-1.19.5-11.el8.x86_64                                                                                                                                                                                                                                                                                                                          1/2\n  Verifying        : libmetalink-0.1.3-7.el8.x86_64                                                                                                                                                                                                                                                                                                                     2/2\nInstalled products updated.\n\nInstalled:\n  libmetalink-0.1.3-7.el8.x86_64                                                wget-1.19.5-11.el8.x86_64\n\nComplete!\n[root@adp-linux home]#\n"})}),"\n",(0,i.jsx)(e.p,{children:"Then download the binary by running"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[root@adp-linux home]# wget https://ak-dsw-mul.dhe.ibm.com/sdfdl/v2/fulfill/M0HV4ML/Xa.2/Xb.htcOMovxHCAgZGSx9HN2d9ToNzH5Bw37/Xc.M0HV4ML/IwCAfZRA_1.1.2_L_ML.zip/Xd./Xf.lPr.A6VR/Xg.12776632/Xi./XY.knac/XZ.iwzQoMk3hbdbv7KOxMrMlBgY0ZRud6M0/IwCAfZRA_1.1.2_L_ML.zip\n--2024-04-11 17:34:33--  https://ak-dsw-mul.dhe.ibm.com/sdfdl/v2/fulfill/M0HV4ML/Xa.2/Xb.htcOMovxHCAgZGSx9HN2d9ToNzH5Bw37/Xc.M0HV4ML/IwCAfZRA_1.1.2_L_ML.zip/Xd./Xf.lPr.A6VR/Xg.12776632/Xi./XY.knac/XZ.iwzQoMk3hbdbv7KOxMrMlBgY0ZRud6M0/IwCAfZRA_1.1.2_L_ML.zip\nResolving ak-dsw-mul.dhe.ibm.com (ak-dsw-mul.dhe.ibm.com)... 170.225.126.30\nConnecting to ak-dsw-mul.dhe.ibm.com (ak-dsw-mul.dhe.ibm.com)|170.225.126.30|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 964597948 (920M) [application/zip]\nSaving to: \u2018IwCAfZRA_1.1.2_L_ML.zip\u2019\n\nIwCAfZRA_1.1.2_L_ML.zip               100%[=========================================================================>] 919.91M  51.8MB/s    in 18s\n\n2024-04-11 17:34:57 (50.1 MB/s) - \u2018IwCAfZRA_1.1.2_L_ML.zip\u2019 saved [964597948/964597948]\n"})}),"\n",(0,i.jsx)(e.p,{children:"Verify you downloaded the zip file"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"[root@adp-linux home]# ls\nIwCAfZRA_1.1.2_L_ML.zip  vpcuser\n[root@adp-linux home]#\n"})}),"\n",(0,i.jsx)(e.h2,{id:"script-walkthrough",children:"Script Walkthrough"}),"\n",(0,i.jsx)("div",{style:{borderBottom:"1px solid #000",marginTop:"20px",marginBottom:"20px"}}),"\n",(0,i.jsx)(e.p,{children:"Navigate to the appropriate directory:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"cd assets/papercuts/refactor\n"})}),"\n",(0,i.jsx)(e.h3,{id:"install-refactor-assistant-5-mins",children:"Install Refactor Assistant (5 mins)"}),"\n",(0,i.jsxs)(e.p,{children:["Update the variable ",(0,i.jsx)(e.code,{children:"REFACTOR_INSTALL_PATH"})," && ",(0,i.jsx)(e.code,{children:"REFACTOR_NAME_OF_ZIP_FILE"})," where the zip file is saved on the ",(0,i.jsx)(e.code,{children:"refactor/.env"})," file\nFor example your ",(0,i.jsx)(e.code,{children:".env"})," file might look like"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:".\n.\nREFACTOR_INSTALL_PATH=/home\nREFACTOR_NAME_OF_ZIP_FILE=IwCAfZRA_1.1.2_L_ML.zip\n"})}),"\n",(0,i.jsx)(e.p,{children:"Run the automation script"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"./refactor/install_refactor.sh\n"})}),"\n",(0,i.jsx)(e.h3,{id:"configure-certifcates-1-min",children:"Configure Certifcates (1 min)"}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"ensure ADDI is installed"}),"\n"]})}),"\n",(0,i.jsx)(e.p,{children:"Update the .env file with the appropriate values for the HOST_PORT and ENVIRONMENT_ID from the ADDI Host / application:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CERTS_LOCATION=/root/certs"}),"\n",(0,i.jsx)(e.li,{children:"HOST_PORT=HOST_PORT"}),"\n",(0,i.jsx)(e.li,{children:"ENVIRONMENT_ID=ADDI_ENV_ID"}),"\n"]}),"\n",(0,i.jsx)(e.admonition,{type:"note",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"HOST_PORT = full address of the ADDI application (ex. https://[ADDI host address]:[port number])"}),"\n"]})}),"\n",(0,i.jsx)(e.p,{children:"Once Refactor Assistant has been installed successfully, configure the refactor host cert by running this script within the same directory:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"./refactor/configure_cert.sh\n"})}),"\n",(0,i.jsx)(e.h3,{id:"install-gitlab-5-min",children:"Install Gitlab (5 min)"}),"\n",(0,i.jsx)(e.p,{children:"Update the .env file with the appropriate values."}),"\n",(0,i.jsx)(e.p,{children:"Then you can run"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sh",children:"./gitlab/setup_gitlab.sh\n"})})]})}function h(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},1151:(n,e,t)=>{t.d(e,{Z:()=>o,a:()=>a});var i=t(7294);const s={},l=i.createContext(s);function a(n){const e=i.useContext(l);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:a(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);