"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[5477],{2016:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var i=n(5893),a=n(1151);const s={id:"gitlab",sidebar_position:9,title:"GitLab",custom_edit_url:null},r="Installing GitLab to the Refactor Assistant Host",o={id:"Prepare/gitlab",title:"GitLab",description:"Running the script",source:"@site/docs/1-Prepare/9-Gitlab.mdx",sourceDirName:"1-Prepare",slug:"/Prepare/gitlab",permalink:"/solution-watsonx-wca4z/Prepare/gitlab",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",sidebarPosition:9,frontMatter:{id:"gitlab",sidebar_position:9,title:"GitLab",custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Guacamole",permalink:"/solution-watsonx-wca4z/Prepare/guacamole"},next:{title:"Understand",permalink:"/solution-watsonx-wca4z/understand"}},l={},c=[{value:"Running the script",id:"running-the-script",level:2},{value:"Retrieving the password and logging in",id:"retrieving-the-password-and-logging-in",level:2},{value:"Logging into GitLab",id:"logging-into-gitlab",level:3},{value:"Creating required repos",id:"creating-required-repos",level:3}];function d(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"installing-gitlab-to-the-refactor-assistant-host",children:"Installing GitLab to the Refactor Assistant Host"}),"\n",(0,i.jsx)(t.h2,{id:"running-the-script",children:"Running the script"}),"\n",(0,i.jsx)(t.p,{children:"On the linux RA host, create the following script"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.code,{children:"startgitlab.sh"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"#/bin/bash\nmkdir -p /gitlab/config /gitlab/logs /gitlab/data\nexport CONFIG=/gitlab/config\nexport LOGS=/gitlab/logs\nexport DATA=/gitlab/data\n\n# Retrieve the IP address associated with addis.ibm.com from /etc/hosts\n#ip_addr=$(awk '/addis.ibm.com/{print $1; exit}' /etc/hosts)\n\n# Check if a container named gitlab already exists\n#    --hostname wca4z-pilot-gitlab.ibm.com \\\n#    --add-host=wca4z-addi.ibm.com:$ip_addr \\\nif ! podman container exists gitlab; then\n  # If the container does not exist, create and start a new one\n  podman container run \\\n    --detach \\\n    --publish 10880:80 --publish 10022:22 --publish 10443:443 \\\n    --name gitlab \\\n    --restart always \\\n    --volume ${CONFIG}:/etc/gitlab \\\n    --volume ${LOGS}:/var/log/gitlab \\\n    --volume ${DATA}:/var/opt/gitlab \\\n    --shm-size 256m \\\n    gitlab/gitlab-ce:latest\nelse\n  # If the container exists, stop and remove it before creating a new one\n  podman stop gitlab || true\n  podman rm gitlab || true\n  podman container run \\\n    --detach \\\n    --publish 10880:80 --publish 10022:22 --publish 10443:443 \\\n    --name gitlab \\\n    --restart always \\\n    --volume ${CONFIG}:/etc/gitlab \\\n    --volume ${LOGS}:/var/log/gitlab \\\n    --volume ${DATA}:/var/opt/gitlab \\\n    --shm-size 256m \\\n    gitlab/gitlab-ce:latest\nfi\n"})}),"\n",(0,i.jsx)(t.p,{children:"Mark the script as executable and run it"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",children:"chmod a+rx startgitlab.sh\n./startgitlab.sh\n"})}),"\n",(0,i.jsx)(t.p,{children:"This will generate all the required directories for gitlab."}),"\n",(0,i.jsx)(t.h2,{id:"retrieving-the-password-and-logging-in",children:"Retrieving the password and logging in"}),"\n",(0,i.jsx)(t.p,{children:"Once the pod is up and online:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",children:"podman ps | grep gitlab\n052cffb36b71  docker.io/gitlab/gitlab-ce:latest                /assets/wrapper       2 hours ago  Up 2 hours (healthy)  0.0.0.0:10022->22/tcp, 0.0.0.0:10443->443/tcp, 0.0.0.0:10880->80/tcp  gitlab\n"})}),"\n",(0,i.jsx)(t.p,{children:"Retrieve the ip of the RA host."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",children:"ifconfig eth0\n\neth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500\n        inet 10.240.0.5  netmask 255.255.255.0  broadcast 10.240.0.255\n        inet6 fe80::2ff:fe7b:e259  prefixlen 64  scopeid 0x20<link>\n        ether 02:00:02:7b:e2:59  txqueuelen 1000  (Ethernet)\n        RX packets 4739001  bytes 11180085073 (10.4 GiB)\n        RX errors 0  dropped 0  overruns 0  frame 0\n        TX packets 5041538  bytes 768444867 (732.8 MiB)\n        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Our ip for this RA host is ",(0,i.jsx)(t.code,{children:"10.240.0.5"}),". Your mileage may differ."]}),"\n",(0,i.jsx)(t.p,{children:"Navigate to gitlab's config directory"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",children:"cd /gitlab/config\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Copy the ",(0,i.jsx)(t.code,{children:"initial_root_password"})," file to your home directory for safe keeping. This assumes you are running these commands as ",(0,i.jsx)(t.code,{children:"root"})]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-tsx",children:"cp initial_root_password ~/\n"})}),"\n",(0,i.jsxs)(t.p,{children:["That ",(0,i.jsx)(t.code,{children:"initial_root_password"})," file contains the root password to log into the gitlab instance."]}),"\n",(0,i.jsx)(t.h3,{id:"logging-into-gitlab",children:"Logging into GitLab"}),"\n",(0,i.jsx)(t.p,{children:"From the windows ADDI host"}),"\n",(0,i.jsx)(t.p,{children:"Open a browser and navigate to the RA host ip at port 10880"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{src:"https://media.github.ibm.com/user/20330/files/be30e0cf-f6f2-4de0-bbdb-f68e65a11389",alt:"CleanShot 2024-05-03 at 20 15 33"})}),"\n",(0,i.jsxs)(t.p,{children:["User is ",(0,i.jsx)(t.code,{children:"root"})," and the password is retrieved from the ",(0,i.jsx)(t.code,{children:"initial_root_password"})," file from earlier."]}),"\n",(0,i.jsx)(t.h3,{id:"creating-required-repos",children:"Creating required repos"}),"\n",(0,i.jsx)(t.p,{children:"TBD"})]})}function h(e={}){const{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>r});var i=n(7294);const a={},s=i.createContext(a);function r(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);